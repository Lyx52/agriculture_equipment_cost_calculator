import{I as c,dP as f,f6 as y,$ as S,bk as l,eq as o,cZ as m,m as R,hd as g,eT as p,z as d}from"./index-DfTA9gm4.js";function q(n){const t=n.geometry,a=n.toJSON(),e=a;let s,r,i;return t!=null&&(r=t.spatialReference,i=o(r),e.geometryType=m(t),e.geometry=JSON.stringify(t),e.inSR=i),a.outSR?(e.outSR=o(a.outSR),s=n.outSpatialReference):t&&(e.outSR=e.inSR,s=r),e.bin&&(e.bin=JSON.stringify(e.bin)),e.quantizationParameters&&(e.quantizationParameters=JSON.stringify(e.quantizationParameters)),e.outStatistics&&(e.outStatistics=JSON.stringify(e.outStatistics)),e.outTimeReference&&(e.outTimeReference=JSON.stringify(e.outTimeReference)),n.defaultSpatialReference&&R(r,s)&&(e.defaultSR=e.inSR,delete e.inSR,delete e.outSR),e}async function J(n,t,a){return N(n,t,a)}async function N(n,t,a={}){const e=typeof n=="string"?c(n):n,s=t.geometry?[t.geometry]:[],r=await f(s,null,{signal:a.signal}),i=r==null?void 0:r[0];i!=null&&((t=t.clone()).geometry=i);const u=y({...e.query,f:"json",...q(t)});return S(l(e.path,"queryBins"),{...a,query:{...u,...a.query}})}async function T(n,t,a){const{data:e}=await J(p(n),g.from(t),a);return d.fromJSON(e)}export{T as executeBinsQuery};
